<div class="item">

  <!-- Fila superior -->
  <div class="item-top">

    <div class="left-info">

      <strong class="servicio">
        {{ sesion.servicio.nombreServicio }}
      </strong>

      <!-- Estado -->
      <div class="estado">
        <span
          class="dot"
          [ngClass]="{
            'realizada': sesion.estado.estadoId === 2,
            'pendiente': sesion.estado.estadoId === 1,
            'cancelada': sesion.estado.estadoId === 3
          }">
        </span>

        <span
          class="estado-texto"
          [ngClass]="{
            'realizada': sesion.estado.estadoId === 2,
            'pendiente': sesion.estado.estadoId === 1,
            'cancelada': sesion.estado.estadoId === 3
          }">
          {{ sesion.estado.estado }}
        </span>
      </div>
    </div>

    <!-- Menu -->
    <div class="menu">
      <button class="menu-btn" (click)="toggleMenu($event)">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
          <path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="3.75"
            d="M12 12h.01v.01H12zm0-7h.01v.01H12zm0 14h.01v.01H12z" />
        </svg>
      </button>

      @if (menuAbierto) {
        <div class="menu-dropdown">
          <button (click)="onVerNotas($event)">Ver notas</button>
          <button (click)="onCambiarEstado($event)">Cambiar estado</button>
          <button class="delete" (click)="onEliminar($event)">Eliminar sesión</button>
        </div>
        }
    </div>
  </div>

  <!-- Fechas -->
  <p class="info-sesion">
    Fecha de registro: {{ toLocalDate(sesion.fechaRegistro) | date:'dd/MM/yyyy HH:mm a' }}
  </p>

  @if (sesion.fechaAplicacion) {
    <p class="info-sesion">
      Fecha de aplicación: {{ toLocalDate(sesion.fechaAplicacion) | date:'dd/MM/yyyy hh:mm a' }}
    </p>
  }
</div>
