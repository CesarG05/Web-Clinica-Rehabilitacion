
@if(paciente){
<div class="ficha-container">

  <!-- Encabezado  -->
  <app-back-header titulo="Ficha del paciente"></app-back-header>

  <div class="cards-section">
    <!-- Sección Clínica -->
    <div class="section">
    <h3>De Clínica</h3>
    <div class="card grid-info">
        <div class="info-item">
        <div class="label">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M5 19V5v4.475V9zm3-6h3.525q.425 0 .713-.288t.287-.712t-.288-.712t-.712-.288H8q-.425 0-.712.288T7 12t.288.713T8 13m0 4h3.525q.425 0 .713-.288t.287-.712t-.288-.712t-.712-.288H8q-.425 0-.712.288T7 16t.288.713T8 17m0-8h8q.425 0 .713-.288T17 8t-.288-.712T16 7H8q-.425 0-.712.288T7 8t.288.713T8 9M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v4.45q0 .425-.288.713T20 10.45t-.712-.287T19 9.45V5H5v14h4q.425 0 .713.288T10 20t-.288.713T9 21zm12-5q-1.05 0-1.775-.725T14.5 13.5t.725-1.775T17 11t1.775.725t.725 1.775t-.725 1.775T17 16m0 1q.975 0 1.938.188t1.862.562q.575.225.888.738T22 19.6v.4q0 .425-.288.713T21 21h-8q-.425 0-.712-.288T12 20v-.4q0-.6.313-1.112t.887-.738q.9-.375 1.863-.562T17 17" />
            </svg>
            <span>No. paciente</span>
        </div>
        <p>{{ paciente.id }}</p>
        </div>

        <div class="info-item">
        <div class="label">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24">
            <path fill="currentColor" d="M12 2a10 10 0 1 1-10 10A10 10 0 0 1 12 2m0 2a8 8 0 1 0 8 8A8 8 0 0 0 12 4m1 9v3h-2v-3h2m0-6v4h-2V7h2Z" />
            </svg>
            <span>Estado</span>
        </div>
        <p [class.activo]="paciente.activo" [class.inactivo]="!paciente.activo">
            {{ paciente.activo ? 'Activo' : 'Inactivo' }}
        </p>
        </div>

        <div class="info-item">
        <div class="label">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M5 22q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V3q0-.425.288-.712T7 2t.713.288T8 3v1h8V3q0-.425.288-.712T17 2t.713.288T18 3v1h1q.825 0 1.413.588T21 6v14q0 .825-.587 1.413T19 22zm0-2h14V10H5zM5 8h14V6H5zm0 0V6z" />
            </svg>
            <span>Fecha de registro</span>
        </div>
        <p>{{ paciente.fechaRegistro | date: 'longDate' }}</p>
        </div>
    </div>
    </div>

    <!-- Sección Personal -->
    <div class="section">
    <h3>Personal</h3>
    <div class="card grid-info">
        <div class="info-item">
        <div class="label">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M18 18q-.425 0-.712-.288T17 17t.288-.712T18 16h3q.425 0 .713.288T22 17t-.288.713T21 18zm-2-5q-.425 0-.712-.288T15 12t.288-.712T16 11h5q.425 0 .713.288T22 12t-.288.713T21 13zm-2-5q-.425 0-.712-.288T13 7t.288-.712T14 6h7q.425 0 .713.288T22 7t-.288.713T21 8zm-6 4q-1.25 0-2.125-.875T5 9t.875-2.125T8 6t2.125.875T11 9t-.875 2.125T8 12m-5 6q-.425 0-.712-.288T2 17v-.9q0-.525.25-1t.7-.75q1.125-.675 2.388-1.012T8 13t2.663.338t2.387 1.012q.45.275.7.75t.25 1v.9q0 .425-.288.713T13 18zm5-3q-1.025 0-2 .25T4.15 16h7.7q-.875-.5-1.85-.75T8 15m0-5q.425 0 .713-.288T9 9t-.288-.712T8 8t-.712.288T7 9t.288.713T8 10m0 6" />
            </svg>
            <span>Nombre</span>
        </div>
        <p>{{ paciente.primerNombre }} {{ paciente.segundoNombre }}</p>
        </div>

        <div class="info-item">
        <div class="label">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M18 18q-.425 0-.712-.288T17 17t.288-.712T18 16h3q.425 0 .713.288T22 17t-.288.713T21 18zm-2-5q-.425 0-.712-.288T15 12t.288-.712T16 11h5q.425 0 .713.288T22 12t-.288.713T21 13zm-2-5q-.425 0-.712-.288T13 7t.288-.712T14 6h7q.425 0 .713.288T22 7t-.288.713T21 8zm-6 4q-1.25 0-2.125-.875T5 9t.875-2.125T8 6t2.125.875T11 9t-.875 2.125T8 12m-5 6q-.425 0-.712-.288T2 17v-.9q0-.525.25-1t.7-.75q1.125-.675 2.388-1.012T8 13t2.663.338t2.387 1.012q.45.275.7.75t.25 1v.9q0 .425-.288.713T13 18zm5-3q-1.025 0-2 .25T4.15 16h7.7q-.875-.5-1.85-.75T8 15m0-5q.425 0 .713-.288T9 9t-.288-.712T8 8t-.712.288T7 9t.288.713T8 10m0 6" />
            </svg>
            <span>Primer apellido</span>
        </div>
        <p>{{ paciente.primerApellido }}</p>
        </div>

        <div class="info-item">
        <div class="label">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M18 18q-.425 0-.712-.288T17 17t.288-.712T18 16h3q.425 0 .713.288T22 17t-.288.713T21 18zm-2-5q-.425 0-.712-.288T15 12t.288-.712T16 11h5q.425 0 .713.288T22 12t-.288.713T21 13zm-2-5q-.425 0-.712-.288T13 7t.288-.712T14 6h7q.425 0 .713.288T22 7t-.288.713T21 8zm-6 4q-1.25 0-2.125-.875T5 9t.875-2.125T8 6t2.125.875T11 9t-.875 2.125T8 12m-5 6q-.425 0-.712-.288T2 17v-.9q0-.525.25-1t.7-.75q1.125-.675 2.388-1.012T8 13t2.663.338t2.387 1.012q.45.275.7.75t.25 1v.9q0 .425-.288.713T13 18zm5-3q-1.025 0-2 .25T4.15 16h7.7q-.875-.5-1.85-.75T8 15m0-5q.425 0 .713-.288T9 9t-.288-.712T8 8t-.712.288T7 9t.288.713T8 10m0 6" />
            </svg>
            <span>Segundo apellidos</span>
        </div>
        <p>{{ paciente.segundoApellido }}</p>
        </div>

        <div class="info-item">
        <div class="label">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M12 15q1.45 0 2.475-1.025T15.5 11.5t-1.025-2.475T12 8T9.525 9.025T8.5 11.5t1.025 2.475T12 15m-1 6h-1q-.425 0-.712-.288T9 20t.288-.712T10 19h1v-2.1q-1.95-.35-3.225-1.875T6.5 11.5q0-.825.238-1.625T7.45 8.4l-.65-.65l-.7.7q-.275.275-.687.287T4.7 8.45q-.275-.275-.275-.687T4.7 7.05l.7-.725l-1.9-1.9V6q0 .425-.288.713T2.5 7t-.712-.288T1.5 6V2q0-.425.288-.712T2.5 1h4q.425 0 .713.288T7.5 2t-.288.713T6.5 3H4.925l1.9 1.9l.725-.725q.275-.275.688-.275t.712.3q.275.275.275.688T8.95 5.6l-.7.725l.65.65q.675-.5 1.475-.737T12 6t1.625.238t1.475.737L19.075 3H17.5q-.425 0-.712-.287T16.5 2t.288-.712T17.5 1h4q.425 0 .713.288T22.5 2v4q0 .425-.288.713T21.5 7t-.712-.288T20.5 6V4.425l-3.975 3.95q.475.7.725 1.488t.25 1.637q0 2-1.275 3.525T13 16.9V19h1q.425 0 .713.288T15 20t-.288.713T14 21h-1v1q0 .425-.288.713T12 23t-.712-.288T11 22z" />
            </svg>
            <span>Sexo</span>
        </div>
        <p>{{ paciente.sexo }}</p>
        </div>

        <div class="info-item">
        <div class="label">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M5 22q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V3q0-.425.288-.712T7 2t.713.288T8 3v1h8V3q0-.425.288-.712T17 2t.713.288T18 3v1h1q.825 0 1.413.588T21 6v14q0 .825-.587 1.413T19 22zm0-2h14V10H5zM5 8h14V6H5zm0 0V6z" />
            </svg>
            <span>Fecha de nacimiento</span>
        </div>
        <p>{{ paciente.fechaNacimiento | date: 'longDate' }}</p>
        </div>

        <div class="info-item">
        <div class="label">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M5 22q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V3q0-.425.288-.712T7 2t.713.288T8 3v1h8V3q0-.425.288-.712T17 2t.713.288T18 3v1h1q.825 0 1.413.588T21 6v14q0 .825-.587 1.413T19 22zm0-2h14V10H5zM5 8h14V6H5zm0 0V6z" />
            </svg>
            <span>Edad</span>
        </div>
        <p>{{ calcularEdad(paciente.fechaNacimiento) }} años</p>
        </div>
    </div>
    </div>

    <!-- Sección Contacto -->
    <div class="section">
    <h3>Contacto</h3>
    <div class="card grid-info">
        <div class="info-item">
        <div class="label">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M4.05 21H3v-5.875L8 14.1l2.9 2.9q1-.575 1.863-1.237t1.587-1.388q.775-.75 1.45-1.625t1.225-1.85l-2.85-2.875L15.1 3H21v1.05q0 3.15-1.35 6.2T15.8 15.8t-5.562 3.85T4.05 21M17.975 9q.375-.9.625-1.888T18.975 5H16.75l-.425 2.35zm-8.95 8.95L7.35 16.275L5 16.75v2.2q1-.075 2.013-.325t2.012-.675m0 0" />
            </svg>
            <span>Teléfono</span>
        </div>
        <p>{{ paciente.telefono }}</p>
        </div>

        <div class="info-item">
        <div class="label">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M23 5v14q0 .825-.587 1.413T21 21h-3q-.425 0-.712-.288T17 20t.288-.712T18 19h3V5h-9v.5q0 .425-.288.713T11 6.5t-.712-.288T10 5.5v-.55q0-.8.575-1.375T11.95 3H21q.825 0 1.413.588T23 5M1 12.025q0-.5.225-.925t.625-.7l5-3.575q.275-.2.563-.288T8 6.45t.588.088t.562.287l5 3.575q.4.275.625.7t.225.925V19q0 .825-.587 1.413T13 21h-2q-.825 0-1.412-.587T9 19v-3H7v3q0 .825-.587 1.413T5 21H3q-.825 0-1.412-.587T1 19zM3 12v7h2v-3q0-.825.588-1.412T7 14h2q.825 0 1.413.588T11 16v3h2v-7L8 8.45zm8 7v-5H5v5v-5h6zm6.5-10h1q.2 0 .35-.15T19 8.5v-1q0-.2-.15-.35T18.5 7h-1q-.2 0-.35.15T17 7.5v1q0 .2.15.35t.35.15m0 4h1q.2 0 .35-.15t.15-.35v-1q0-.2-.15-.35T18.5 11h-1q-.2 0-.35.15t-.15.35v1q0 .2.15.35t.35.15m0 4h1q.2 0 .35-.15t.15-.35v-1q0-.2-.15-.35T18.5 15h-1q-.2 0-.35.15t-.15.35v1q0 .2.15.35t.35.15" />
            </svg>
            <span>Dirección</span>
        </div>
        <p>{{ paciente.direccion }}</p>
        </div>

        <div class="info-item">
        <div class="label">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                <path fill="currentColor" d="M7 17q-.825 0-1.412-.587T5 15V5q0-.825.588-1.412T7 3h14q.825 0 1.413.588T23 5v10q0 .825-.587 1.413T21 17zm6.425-5.1L7 7.425V15h14V7.425L14.575 11.9q-.275.2-.575.2t-.575-.2M14 9.85L21 5H7zM3 21q-.825 0-1.412-.587T1 19V7.5q0-.425.288-.712T2 6.5t.713.288T3 7.5V19h15.5q.425 0 .713.288T19.5 20t-.288.713T18.5 21zM21 7.35V5H7v2.35V5h14z" />
            </svg>
            <span>Correo electrónico</span>
        </div>
        <p>{{ paciente.correoElectronico }}</p>
        </div>
    </div>
    </div>
  </div>

  <!-- BOTONES DE ACCIÓN -->
  <div class="action-buttons">
    <button  class="btn btn-historial" [routerLink]="['/pacientes', paciente.id, 'historial-clinico']"> Ver historial clínico </button>
    <button class="btn btn-editar" [routerLink]="['/pacientes/editar', paciente.id]">Editar datos</button>
    <button class="btn btn-eliminar" (click)="eliminarPaciente(paciente)">Eliminar</button>
  </div>

</div>
}

@if(!paciente) {
    <div class="sin-paciente">
        <p>No se ha proporcionado información del paciente.</p>
        <button class="back-btn" (click)="volver()">Volver</button>
    </div>
}

@if (modalAbierto) {
  <app-confirm-modal
    [title]="modalTitle"
    [message]="modalMessage"
    (confirm)="modalConfirmCallback && modalConfirmCallback(); cerrarModal()"
    (cancel)="cerrarModal()">
  </app-confirm-modal>
}


