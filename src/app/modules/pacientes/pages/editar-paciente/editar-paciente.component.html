<div class="paciente-create-container">
 
  <!-- Encabezado  -->
  <app-back-header titulo="Editar información del paciente" variant="spaced"></app-back-header>

  <form class="form-grid" (ngSubmit)="guardarCambios()">
    <!-- Izquierda -->
    <div class="form-left">
      <h3>Datos personales</h3>

      <app-input-field-form 
        label="Primer nombre" 
        [(model)]="paciente.primerNombre"
        [required]="true"
        [submitted]="submitted"
        [errorMessage]="'El primer nombre es obligatorio'"
        [iconPath]="'M14 20v-1.25q0-.4.163-.763t.437-.637l4.925-4.925q.225-.225.5-.325t.55-.1q.3 0 .575.113t.5.337l.925.925q.2.225.313.5t.112.55t-.1.563t-.325.512l-4.925 4.925q-.275.275-.637.425t-.763.15H15q-.425 0-.712-.288T14 20M4 19v-1.8q0-.85.438-1.562T5.6 14.55q1.55-.775 3.15-1.162T12 13q.925 0 1.825.113t1.8.362l-2.75 2.75q-.425.425-.65.975T12 18.35V20H5q-.425 0-.712-.288T4 19m16.575-3.6l.925-.975l-.925-.925l-.95.95zM12 12q-1.65 0-2.825-1.175T8 8t1.175-2.825T12 4t2.825 1.175T16 8t-1.175 2.825T12 12'"
      ></app-input-field-form>

      <app-input-field-form 
        label="Segundo nombre" 
        [(model)]="paciente.segundoNombre"
        [iconPath]="'M14 20v-1.25q0-.4.163-.763t.437-.637l4.925-4.925q.225-.225.5-.325t.55-.1q.3 0 .575.113t.5.337l.925.925q.2.225.313.5t.112.55t-.1.563t-.325.512l-4.925 4.925q-.275.275-.637.425t-.763.15H15q-.425 0-.712-.288T14 20M4 19v-1.8q0-.85.438-1.562T5.6 14.55q1.55-.775 3.15-1.162T12 13q.925 0 1.825.113t1.8.362l-2.75 2.75q-.425.425-.65.975T12 18.35V20H5q-.425 0-.712-.288T4 19m16.575-3.6l.925-.975l-.925-.925l-.95.95zM12 12q-1.65 0-2.825-1.175T8 8t1.175-2.825T12 4t2.825 1.175T16 8t-1.175 2.825T12 12'"
      ></app-input-field-form>

      <app-input-field-form 
        label="Primer apellido" 
        [(model)]="paciente.primerApellido"
         [required]="true"
        [submitted]="submitted"
        [errorMessage]="'El primer apellido es obligatorio'"
        [iconPath]="'M14 20v-1.25q0-.4.163-.763t.437-.637l4.925-4.925q.225-.225.5-.325t.55-.1q.3 0 .575.113t.5.337l.925.925q.2.225.313.5t.112.55t-.1.563t-.325.512l-4.925 4.925q-.275.275-.637.425t-.763.15H15q-.425 0-.712-.288T14 20M4 19v-1.8q0-.85.438-1.562T5.6 14.55q1.55-.775 3.15-1.162T12 13q.925 0 1.825.113t1.8.362l-2.75 2.75q-.425.425-.65.975T12 18.35V20H5q-.425 0-.712-.288T4 19m16.575-3.6l.925-.975l-.925-.925l-.95.95zM12 12q-1.65 0-2.825-1.175T8 8t1.175-2.825T12 4t2.825 1.175T16 8t-1.175 2.825T12 12'"
      ></app-input-field-form>

      <app-input-field-form 
        label="Segundo apellido" 
        [(model)]="paciente.segundoApellido"
        [iconPath]="'M14 20v-1.25q0-.4.163-.763t.437-.637l4.925-4.925q.225-.225.5-.325t.55-.1q.3 0 .575.113t.5.337l.925.925q.2.225.313.5t.112.55t-.1.563t-.325.512l-4.925 4.925q-.275.275-.637.425t-.763.15H15q-.425 0-.712-.288T14 20M4 19v-1.8q0-.85.438-1.562T5.6 14.55q1.55-.775 3.15-1.162T12 13q.925 0 1.825.113t1.8.362l-2.75 2.75q-.425.425-.65.975T12 18.35V20H5q-.425 0-.712-.288T4 19m16.575-3.6l.925-.975l-.925-.925l-.95.95zM12 12q-1.65 0-2.825-1.175T8 8t1.175-2.825T12 4t2.825 1.175T16 8t-1.175 2.825T12 12'"
      ></app-input-field-form>

      <app-select-field-form
        label="Sexo"
        name="sexo"
        icon='M7 11a4 4 0 1 0 8 0a4 4 0 1 0-8 0m12-8l-5 5m1-5h4v4m-8 9v6m-3-3h6'
        [options]="sexos"
        [(model)]="paciente.sexoId">
      </app-select-field-form>

      <app-date-field-form
        label="Fecha de nacimiento"
        name="fechaNacimiento"
        icon='M5 22q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V3q0-.425.288-.712T7 2t.713.288T8 3v1h8V3q0-.425.288-.712T17 2t.713.288T18 3v1h1q.825 0 1.413.588T21 6v14q0 .825-.587 1.413T19 22zm0-2h14V10H5zm7-6q-.425 0-.712-.288T11 13t.288-.712T12 12t.713.288T13 13t-.288.713T12 14m-4 0q-.425 0-.712-.288T7 13t.288-.712T8 12t.713.288T9 13t-.288.713T8 14m8 0q-.425 0-.712-.288T15 13t.288-.712T16 12t.713.288T17 13t-.288.713T16 14m-4 4q-.425 0-.712-.288T11 17t.288-.712T12 16t.713.288T13 17t-.288.713T12 18m-4 0q-.425 0-.712-.288T7 17t.288-.712T8 16t.713.288T9 17t-.288.713T8 18m8 0q-.425 0-.712-.288T15 17t.288-.712T16 16t.713.288T17 17t-.288.713T16 18'
        [(model)]="paciente.fechaNacimiento">
      </app-date-field-form>
 
    </div>

    <!-- Derecha -->
    <div class="form-right">
      <h3>Datos de contacto</h3>
      <app-input-field-form 
        label="Dirección" 
        [(model)]="paciente.direccion"
         [required]="true"
        [submitted]="submitted"
        [errorMessage]="'La dirección es obligatorio'"
        [iconPath]="'M1 12.025q0-.5.225-.925t.625-.7l5-3.575q.275-.2.563-.288T8 6.45t.588.088t.562.287l5 3.575q.4.275.625.7t.225.925V19q0 .825-.587 1.413T13 21h-1q-.825 0-1.412-.587T10 19v-2.5q0-.625-.437-1.062T8.5 15h-1q-.625 0-1.062.438T6 16.5V19q0 .825-.587 1.413T4 21H3q-.825 0-1.412-.587T1 19zM23 5v14q0 .825-.587 1.413T21 21h-3q-.425 0-.712-.288T17 20v-8.975q0-.5-.213-.925t-.612-.7L10.95 5.65q-.325-.25-.525-.6t-.2-.7q0-.625.4-.987T11.7 3H21q.825 0 1.413.588T23 5m-5.5 4h1q.2 0 .35-.15T19 8.5v-1q0-.2-.15-.35T18.5 7h-1q-.2 0-.35.15T17 7.5v1q0 .2.15.35t.35.15m0 4h1q.2 0 .35-.15t.15-.35v-1q0-.2-.15-.35T18.5 11h-1q-.2 0-.35.15t-.15.35v1q0 .2.15.35t.35.15m0 4h1q.2 0 .35-.15t.15-.35v-1q0-.2-.15-.35T18.5 15h-1q-.2 0-.35.15t-.15.35v1q0 .2.15.35t.35.15'"
      ></app-input-field-form>

      <app-input-field-form 
        label="Teléfono" 
        [(model)]="paciente.telefono"
         [required]="true"
        [submitted]="submitted"
        [errorMessage]="'El teléfono es obligatorio'"
        [iconPath]="'M4.05 21q-.45 0-.75-.3t-.3-.75V15.9q0-.325.225-.587t.575-.363l3.45-.7q.35-.05.713.063t.587.337L10.9 17q.95-.55 1.8-1.213t1.625-1.437q.825-.8 1.513-1.662t1.187-1.788L14.6 8.45q-.2-.2-.275-.475T14.3 7.3l.65-3.5q.05-.325.325-.562T15.9 3h4.05q.45 0 .75.3t.3.75q0 3.125-1.362 6.175t-3.863 5.55t-5.55 3.863T4.05 21'"
      ></app-input-field-form>

      <app-input-field-form 
        label="Correo electrónico" 
        type="email" 
        [(model)]="paciente.correoElectronico"
        [iconPath]="'M13.425 11.9q.275.2.575.2t.575-.2L21 7.425V5l-7 4.85L7 5v2.425zM3 21q-.825 0-1.412-.587T1 19V7.5q0-.425.288-.712T2 6.5t.713.288T3 7.5V19h15.5q.425 0 .713.288T19.5 20t-.288.713T18.5 21zm4-4q-.825 0-1.412-.587T5 15V5q0-.825.588-1.412T7 3h14q.825 0 1.413.588T23 5v10q0 .825-.587 1.413T21 17z'"
      ></app-input-field-form>

      <!-- Sección Clinica-->
      <h3>Datos de clínica</h3>
      
      <div class="paciente-numero">
        <label>Número de paciente</label>

        <div class="numero-container">
          <svg xmlns="http://www.w3.org/2000/svg" class="numero-icon" width="24" height="24" viewBox="0 0 24 24">
            <path fill="currentColor" d="M8 9h8q.425 0 .713-.288T17 8t-.288-.712T16 7H8q-.425 0-.712.288T7 8t.288.713T8 9M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v4.65q0 .425-.4.575t-.725-.175q-.6-.5-1.338-.775T17 9q-1.125 0-2.1.525T13.275 11H8q-.425 0-.712.288T7 12t.288.713T8 13h4.525q-.05.5 0 1t.225 1H8q-.425 0-.712.288T7 16t.288.713T8 17h2.925q-.475.55-.7 1.213T10 19.6v.4q0 .425-.287.712T9 21zm8 0q-.425 0-.712-.288T12 20v-.4q0-.6.313-1.112t.887-.738q.9-.375 1.863-.562T17 17t1.938.188t1.862.562q.575.225.888.738T22 19.6v.4q0 .425-.288.713T21 21zm4-5q-1.05 0-1.775-.725T14.5 13.5t.725-1.775T17 11t1.775.725t.725 1.775t-.725 1.775T17 16" />
          </svg>

          <span class="numero-box">{{ paciente.id }}</span>
        </div>
      </div>

      <div class="switch-wrapper">
        <label>Activo</label>
        <label class="switch">
          <input type="checkbox" [(ngModel)]="paciente.activo" name="activo" />
          <span class="slider"></span>
        </label>
      </div>

    </div>

    <!-- Botón Guardar -->
    <div class="form-footer">
      <button type="submit" class="btn-save" [disabled]="cargando">
        @if (!cargando) {
          Guardar cambios
        } @else {
          <span class="spinner"></span> Guardando...
        }
      </button>
    </div>
  </form>
</div>
